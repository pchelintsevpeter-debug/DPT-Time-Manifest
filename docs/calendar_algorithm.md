# DPT Calendar Algorithm

Digital Planetary Time (DPT) использует **цифровой год из 360 дней**, который позволяет синхронизировать системы, смарт-контракты и автономные машины без пауз.  
Человеческое восприятие не учитывается — DPT ориентирован на **техническую непрерывность**.

---

## 1. Определение года

- **Год DPT** начинается с **весеннего равноденствия** текущего года и заканчивается на **весеннем равноденствии следующего года**.
- `epoch_start` и `epoch_end` задаются в UTC.
- Реальная длина года: `total_seconds = epoch_end - epoch_start` (в секундах).

---

## 2. Разделение года на 360 дней

- Цифровой день (DPT-day) вычисляется как:

day_seconds = total_seconds / 360


- Пример:
  - Если год 365.25 дней, каждый цифровой день ≈ 87657.5 секунд (~24ч 20с).

- Таким образом 360 цифровых дней **равномерно распределены по реальному году**, без высокосных лет.

---

## 3. Pt-единицы внутри дня

DPT делит цифровой день на Pt-единицы для точного измерения:

| Единица        | Кол-во PT | Эквивалент в секундах |
|----------------|-----------|----------------------|
| 1 PT           | 1         | 0.1 s                |
| 1 PT-second    | 10        | 1 s                  |
| 1 PT-minute    | 360       | 36 s                 |
| 1 PT-octave    | 3600      | 6 min                |
| 1 PT-hour      | 36000     | 1 h                  |
| 1 цифровой день| 864000    | 24 h                 |

---

## 4. Алгоритм конверсии

### 4.1 UTC → DPT

1. Вычисляем количество секунд, прошедших с `epoch_start`:

elapsed_seconds = UTC - epoch_start

2. Определяем **номер цифрового дня**:

day_index = floor(elapsed_seconds / day_seconds) + 1


3. Определяем **секунду внутри цифрового дня**:

pt_second = elapsed_seconds % day_seconds


4. Возвращаем результат:

DPT = { DPT_year, day_index, pt_second }


### 4.2 DPT → UTC

elapsed_seconds = (day_index - 1) * day_seconds + pt_second
UTC = epoch_start + elapsed_seconds


---

## 5. Компенсация лишних секунд / дней

- Год DPT фиксирован в 360 дней.  
- Если реальный год длиннее 360 дней (~365.25 дней), **разница распределяется по длине каждого дня**.  

**Пример:**  

extra_seconds = total_seconds - (360 * standard_day_seconds)
day_seconds = standard_day_seconds + extra_seconds / 360


- Таким образом каждая DPT-сутки «растягиваются» на несколько секунд/минут, чтобы компенсировать лишние 5–6 дней.  
- В результате DPT **не требует высокосных лет** — алгоритм сам компенсирует разницу.

---

## 6. Практическое использование

1. Загрузить JSON-манифест текущего DPT-года.  
2. Использовать SDK для конверсии времени.  
3. Для новых лет создаётся новый манифест, где:
   - `epoch_start` → следующее весеннее равноденствие
   - `epoch_end` → весеннее равноденствие следующего года  
   - `day_seconds` пересчитывается автоматически.

---

## 7. Примечания

- DPT полностью **машино-ориентирован**, для людей можно использовать локальные «оболочки» и привычные календари.  
- Схема позволяет строить **глобальные контракты и синхронизацию машин** без пауз или скачков времени.  
- Каждый цифровой день и Pt-единица остаются **константой в пределах года**, а коррекция выполняется распределением лишних секунд.
